(this["webpackJsonptopola-viewer"]=this["webpackJsonptopola-viewer"]||[]).push([[0],{196:function(e,t,n){e.exports=n.p+"static/media/topola.060eef13.jpg"},287:function(e){e.exports=JSON.parse('{"menu.open":"Otw\xf3rz","menu.open_file":"Otw\xf3rz plik","menu.load_from_url":"Otw\xf3rz URL","menu.select_wikitree_id":"Wybierz WikiTree ID","menu.print":"Drukuj","menu.download":"Pobierz","menu.pdf_file":"Plik PDF","menu.png_file":"Plik PNG","menu.svg_file":"Plik SVG","menu.download_pdf":"Pobierz PDF","menu.download_png":"Pobierz PNG","menu.download_svg":"Pobierz SVG","menu.view":"Widok","menu.hourglass":"Wykres klepsydrowy","menu.relatives":"Wszyscy krewni","menu.fancy":"Ozdobne drzewo (eksperymentalne)","menu.wikitree_login":"Zaloguj do WikiTree","menu.wikitree_logged_in":"Zalogowano","menu.wikitree_popup_username":"Zalogowano do WikiTree jako {username}","menu.wikitree_popup":"Zalogowano do WikiTree","menu.github":"Projekt na stronie GitHub","menu.search.placeholder":"Szukaj osoby","menu.search.no_results":"Brak wynik\xf3w","intro.title":"Topola Genealogy","intro.description":"Topola Genealogy pozwala przegl\u0105da\u0107 drzewo genealogiczne w interaktywny spos\xf3b.","intro.instructions":"Kliknij OTW\xd3RZ PLIK lub OTW\xd3RZ URL, aby za\u0142adowa\u0107 plik GEDCOM. Wi\u0119kszo\u015b\u0107 program\xf3w genealogicznych posiada funkcj\u0119 eksportu do pliku GEDCOM.","intro.examples":"Poni\u017cej jest kilka przyk\u0142ad\xf3w znalezionych w Internecie:","intro.from":"\u017ar\xf3d\u0142o:","intro.privacy":"Prywatno\u015b\u0107","intro.privacy_note":"U\u017cywaj\u0105c funkcji \\"Otw\xf3rz plik\\", Twoje dane nie s\u0105 nigdzie wysy\u0142ane i pozostaj\u0105 na Twoim komputerze. U\u017cywaj\u0105c funkcji \\"Otw\xf3rz URL\\", dane z podanego adresu przesy\u0142ane s\u0105 przez us\u0142ug\u0119 {link} w celu umo\u017cliwienia za\u0142adowania danych z innej domeny (CORS).","load_from_url.title":"Otw\xf3rz z adresu URL","load_from_url.comment":"Dane z podanego adresu URL zostan\u0105 za\u0142adowane poprzez us\u0142ug\u0119 {link} w celu unikni\u0119cia problem\xf3w z CORS.","load_from_url.cancel":"Anuluj","load_from_url.load":"Otw\xf3rz","select_wikitree_id.title":"Podaj WikiTree ID","select_wikitree_id.comment":"Wpisz identyfikator profilu {wikiTreeLink}. Przyk\u0142ady: {example1}, {example2}","select_wikitree_id.cancel":"Anuluj","select_wikitree_id.load":"Otw\xf3rz","gedcom.BAPM":"Chrzest","gedcom.BIRT":"Narodziny","gedcom.BURI":"Pogrzeb","gedcom.CENS":"Spis ludno\u015bci","gedcom.CHR":"Chrzest","gedcom.DEAT":"\u015amier\u0107","gedcom.DSCR":"Opis","gedcom.EMAIL":"E-mail","gedcom.EVEN":"Wydarzenie","gedcom.OCCU":"Zaw\xf3d","gedcom.RIN":"ID","gedcom.TITL":"Tytu\u0142","gedcom.WWW":"Strona WWW","gedcom._UPD":"Ostatnia aktualizacja","date.abt":"oko\u0142o","date.cal":"wyliczone","date.est":"oszacowane","date.between":"mi\u0119dzy {from} a {to}","date.after":"po {from}","date.before":"przed {to}","error.error":"B\u0142\u0105d","error.failed_pdf":"Nie uda\u0142o si\u0119 utworzy\u0107 pliku PDF. Spr\xf3buj jeszcze raz z mniejszym diagramem lub pobierz plik SVG.","error.failed_png":"Nie uda\u0142o si\u0119 utworzy\u0107 pliku PNG. Spr\xf3buj jeszcze raz z mniejszym diagramem lub pobierz plik SVG.","error.failed_to_load_file":"B\u0142\u0105d wczytywania pliku","error.failed_wikitree_load_more":"B\u0142\u0105d podczas pobierania danych z WikiTree. {error}","wikitree.private":"Prywatne"}')},288:function(e,t){},331:function(e,t,n){e.exports=n(585)},343:function(e,t){},349:function(e,t){},410:function(e,t){},582:function(e,t,n){},585:function(e,t,n){"use strict";n.r(t);var a=n(34),r=n(285),i=n(286),o=n(0),s=n(76),c=n(287),l=n(8),u=n(41),d=n(40),m=n(48),f=n(10),h=n.n(f),p=n(18),g=n(28),v=n(29),w=n(33);function E(e,t){window.gtag("event",e,t)}var k,b=n(142),y=n(72),O=n(49),M=n(103),D=n(73),T=n(615),I=n(195),S=n(95),j=(n(74),n(35));function x(e){var t=Object(b.a)("#svgContainer").node(),n=y.c.transform.k,a=Object(M.a)([0,(t.clientWidth-e[0]*n)/2]),r=Object(M.a)([0,(t.clientHeight-e[1]*n)/2]);Object(b.a)("#chartSvg").attr("width",e[0]*n).attr("height",e[1]*n).attr("transform","translate(".concat(a,", ").concat(r,")")),Object(b.a)("#chart").attr("transform","scale(".concat(n,")")),t.scrollLeft=-y.c.transform.x,t.scrollTop=-y.c.transform.y}function _(){var e=Object(b.a)("#svgContainer").node(),t=e.scrollLeft+e.clientWidth/2,n=e.scrollTop+e.clientHeight/2,a=Object(S.b)(e).k;Object(b.a)(e).call(Object(S.a)().translateTo,t/a,n/a)}function R(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e,n){t.onload=function(t){return e(t.target.result)}}))}function L(e){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(h.a.mark((function e(t){var n,a,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.href.baseVal){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch(n);case 6:return a=e.sent,e.next=9,a.blob();case 9:return r=e.sent,e.next=12,R(r);case 12:i=e.sent,t.href.baseVal=i,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.warn("Failed to load image:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}function C(e){return z.apply(this,arguments)}function z(){return(z=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t.getElementsByTagName("image")),e.next=3,Promise.all(n.map(L));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){var t=new Image;return t.src=URL.createObjectURL(e),new Promise((function(e,n){t.addEventListener("load",(function(){return e(t)}))}))}function P(e){var t=document.createElement("canvas");t.width=2*e.width,t.height=2*e.height;var n=t.getContext("2d"),a=n.fillStyle;return n.fillStyle="white",n.fillRect(0,0,t.width,t.height),n.fillStyle=a,n.drawImage(e,0,0,t.width,t.height),t}function A(e,t){return new Promise((function(n,a){e.toBlob((function(e){e?n(e):a()}),t)}))}!function(e){e[e.Hourglass=0]="Hourglass",e[e.Relatives=1]="Relatives",e[e.Fancy=2]="Fancy"}(k||(k={}));var F=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).chart=void 0,e.animating=!1,e.rerenderRequired=!1,e.zoomBehavior=void 0,e}return Object(v.a)(a,[{key:"getChartType",value:function(){switch(this.props.chartType){case k.Hourglass:return j.HourglassChart;case k.Relatives:return j.RelativesChart;case k.Fancy:return j.FancyChart;default:return j.HourglassChart}}},{key:"getRendererType",value:function(){switch(this.props.chartType){case k.Fancy:return j.CircleRenderer;default:return j.DetailedRenderer}}},{key:"zoom",value:function(e){var t=Object(b.a)("#svgContainer");this.zoomBehavior.scaleBy(t,e)}},{key:"renderChart",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initialRender:!1};if(t.initialRender||!this.animating){if(t.initialRender||!this.props.freezeAnimation){t.initialRender?(Object(b.a)("#chart").node().innerHTML="",this.chart=Object(j.createChart)({json:this.props.data,chartType:this.getChartType(),renderer:this.getRendererType(),svgSelector:"#chart",indiCallback:function(t){return e.props.onSelection(t)},animate:!0,updateSvgSize:!1,locale:this.context.intl.locale})):this.chart.setData(this.props.data);var n=this.chart.render({startIndi:this.props.selection.id,baseGeneration:this.props.selection.generation}),a=Object(b.a)("#chartSvg"),r=Object(b.a)("#svgContainer").node(),i=Object(S.b)(r).k,o=Object(D.a)([1,i,r.clientWidth/n.size[0],r.clientHeight/n.size[1]]),s=[Object(M.a)([.1,o]),2];this.zoomBehavior=Object(S.a)().scaleExtent(s).translateExtent([[0,0],n.size]).on("zoom",(function(){return x(n.size)})),Object(b.a)(r).on("scroll",_).call(this.zoomBehavior);var c=function(e){return function(){var t=Object(O.a)(r.scrollTop,e);return function(e){r.scrollTop=t(e)}}},l=function(e){return function(){var t=Object(O.a)(r.scrollLeft,e);return function(e){r.scrollLeft=t(e)}}},u=r.clientWidth/2-n.origin[0]*i,d=r.clientHeight/2-n.origin[1]*i,m=Object(M.a)([0,(r.clientWidth-n.size[0]*i)/2]),f=Object(M.a)([0,(r.clientHeight-n.size[1]*i)/2]),h=a.transition().delay(200).duration(500),p=t.initialRender?a:h;p.attr("transform","translate(".concat(m,", ").concat(f,")")).attr("width",n.size[0]*i).attr("height",n.size[1]*i),t.initialRender?(r.scrollLeft=-u,r.scrollTop=-d):h.tween("scrollLeft",l(-u)).tween("scrollTop",c(-d)),this.animating=!0,n.animationPromise.then((function(){e.animating=!1,e.rerenderRequired&&(e.rerenderRequired=!1,e.renderChart({initialRender:!1}))}))}}else this.rerenderRequired=!0}},{key:"componentDidMount",value:function(){this.renderChart({initialRender:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props.chartType!==e.chartType;this.renderChart({initialRender:t})}},{key:"render",value:function(){var e=this;return o.createElement("div",{id:"svgContainer"},o.createElement(T.a,{minWidth:768,className:"zoom"},o.createElement("button",{className:"zoom-in",onClick:function(){return e.zoom(1.3)}},"+"),o.createElement("button",{className:"zoom-out",onClick:function(){return e.zoom(1/1.3)}},"\u2212")),o.createElement("svg",{id:"chartSvg"},o.createElement("g",{id:"chart"})))}},{key:"getStrippedSvg",value:function(){var e=document.getElementById("chartSvg").cloneNode(!0);e.removeAttribute("transform");var t=Object(b.a)("#svgContainer").node(),n=Object(S.b)(t).k;return e.setAttribute("width",String(Number(e.getAttribute("width"))/n)),e.setAttribute("height",String(Number(e.getAttribute("height"))/n)),e.querySelector("#chart").removeAttribute("transform"),e}},{key:"getSvgContents",value:function(){return(new XMLSerializer).serializeToString(this.getStrippedSvg())}},{key:"getSvgContentsWithInlinedImages",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getStrippedSvg(),e.next=3,C(t);case 3:return e.abrupt("return",(new XMLSerializer).serializeToString(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"print",value:function(){var e=this,t=document.createElement("iframe");t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.onload=function(){t.contentDocument.open(),t.contentDocument.write(e.getSvgContents()),t.contentDocument.close(),setTimeout((function(){t.contentWindow.focus(),t.contentWindow.print(),t.parentNode.removeChild(t)}),500)},document.body.appendChild(t)}},{key:"downloadSvg",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSvgContentsWithInlinedImages();case 2:t=e.sent,n=new Blob([t],{type:"image/svg+xml"}),Object(I.saveAs)(n,"topola.svg");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"drawOnCanvas",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSvgContentsWithInlinedImages();case 2:return t=e.sent,n=new Blob([t],{type:"image/svg+xml"}),e.t0=P,e.next=7,W(n);case 7:return e.t1=e.sent,e.next=10,(0,e.t0)(e.t1);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadPng",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.drawOnCanvas();case 2:return t=e.sent,e.next=5,A(t,"image/png");case 5:n=e.sent,Object(I.saveAs)(n,"topola.png");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadPdf",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(3).then(n.t.bind(null,617,7));case 2:return t=e.sent,a=t.default,e.next=6,this.drawOnCanvas();case 6:r=e.sent,(i=new a({orientation:r.width>r.height?"l":"p",unit:"pt",format:[r.width,r.height]})).addImage(r,"PNG",0,0,r.width,r.height,"NONE"),i.save("topola.pdf");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(o.PureComponent);F.contextTypes={intl:l.d};var U=n(292),G=n.n(U),H=n(293),B=n.n(H),V=n(191);function K(e){return e.substring(1,e.length-1)}function J(e){var t=new Map;return e.indis.forEach((function(e){t.set(e.id,e)})),t}function q(e){var t=new Map;return e.fams.forEach((function(e){t.set(e.id,e)})),t}function Z(e){var t=e.find((function(e){return"HEAD"===e.tag})),n={},a={},r={};return e.forEach((function(e){"INDI"===e.tag?n[K(e.pointer)]=e:"FAM"===e.tag?a[K(e.pointer)]=e:e.pointer&&(r[K(e.pointer)]=e)})),{head:t,indis:n,fams:a,other:r}}function Y(e,t){return e<t?-1:e>t?1:0}function X(e,t){var n=e&&(e.date||e.dateRange&&e.dateRange.from),a=t&&(t.date||t.dateRange&&t.dateRange.from);return n&&n.year&&a&&a.year?n.year!==a.year?n.year-a.year:n.month&&a.month&&(n.month!==a.month||n.day&&a.day&&n.day!==a.day)?n.month-a.month:0:0}function $(e){var t=function(e){var t=J(e);return function(e,n){var a=t.get(e),r=t.get(n);return X(a&&a.birth,r&&r.birth)||Y(e,n)}}(e),n=e.fams.map((function(e){return function(e,t){if(!e.children)return e;var n=e.children.sort(t);return Object.assign({},e,{children:n})}(e,t)}));return Object.assign({},e,{fams:n})}function Q(e){var t=function(e){var t=q(e);return function(e,n){var a=t.get(e),r=t.get(n);return X(a&&a.marriage,r&&r.marriage)||Y(e,n)}}(e),n=e.indis.map((function(e){return function(e,t){if(!e.fams)return e;var n=e.fams.sort(t);return Object.assign({},e,{fams:n})}(e,t)}));return Object.assign({},e,{indis:n})}function ee(e){return Q($(e))}var te=[".jpg",".png",".gif"];function ne(e,t){if(!e.images||0===e.images.length)return e;var n=[];return e.images.forEach((function(e){var a=e.url.match(/[^/\\]*$/)[0];t.has(a)?n.push({url:t.get(a),title:e.title}):e.url.startsWith("http")&&function(e){var t=e.toLowerCase();return te.some((function(e){return t.endsWith(e)}))}(e.url)&&n.push(e)})),Object.assign({},e,{images:n})}function ae(e,t){var n=e.indis.map((function(e){return ne(e,t)}));return Object.assign({},e,{indis:n})}function re(e){var t=e&&e.tree&&e.tree.find((function(e){return"SOUR"===e.tag})),n=t&&t.tree&&t.tree.find((function(e){return"NAME"===e.tag}));return n&&n.data||null}var ie=new Map([["abt","about"],["cal","calculated"],["est","estimated"]]);function oe(e,t){var n=void 0!==e.day,a=void 0!==e.month,r=void 0!==e.year;if(!n&&!a&&!r)return e.text||"";var i=new Date(r?e.year:0,a?e.month-1:0,n?e.day:1),o=e.qualifier&&e.qualifier.toLowerCase(),s={day:n?"numeric":void 0,month:a?"long":void 0,year:r?"numeric":void 0};return[o&&t.formatMessage({id:"date.".concat(o),defaultMessage:ie.get(o)||o}),new Intl.DateTimeFormat(t.locale,s).format(i)].join(" ")}function se(e,t){return e?e.date?oe(e.date,t):e.dateRange?function(e,t){var n=e.from,a=e.to,r=n&&oe(n,t),i=a&&oe(a,t);return r&&i?t.formatMessage({id:"date.between",defaultMessage:"between {from} and {to}"},{from:r,to:i}):r?t.formatMessage({id:"date.after",defaultMessage:"after {from}"},{from:r}):i?t.formatMessage({id:"date.before",defaultMessage:"before {to}"},{to:i}):""}(e.dateRange,t):"":""}var ce=["BIRT","BAPM","CHR","DEAT","BURI","EVEN","CENS"],le=["NAME","SEX","FAMC","FAMS","NOTE","SOUR"],ue=new Map([["BAPM","Baptism"],["BIRT","Birth"],["BURI","Burial"],["CENS","Census"],["CHR","Christening"],["DEAT","Death"],["EMAIL","E-mail"],["EVEN","Event"],["OCCU","Occupation"],["TITL","Title"],["WWW","WWW"]]);function de(e){return o.createElement(l.a,{id:"gedcom.".concat(e),defaultMessage:ue.get(e)||e})}function me(e){return o.createElement(o.Fragment,null,e.map((function(e,t){return o.createElement("div",{key:t},o.createElement(B.a,{properties:{target:"_blank"}},e),o.createElement("br",null))})))}function fe(e){var t=[e.data];return e.tree.forEach((function(e){if("CONC"===e.tag&&e.data){var n=t.length-1;t[n]+=e.data}else"CONT"===e.tag&&e.data&&t.push(e.data)})),t}function he(e,t){var n=[];e.data&&e.data.length>1&&n.push(o.createElement("i",null,e.data));var r=e.tree.find((function(e){return"DATE"===e.tag}));r&&r.data&&n.push(function(e,t){return se(Object(j.getDate)(e),t)}(r.data,t));var i=e.tree.find((function(e){return"PLAC"===e.tag}));return i&&i.data&&n.push.apply(n,Object(a.a)(fe(i))),e.tree.filter((function(e){return"NOTE"===e.tag})).forEach((function(e){return fe(e).forEach((function(e){return n.push(o.createElement("i",null,e))}))})),n.length?o.createElement(o.Fragment,null,o.createElement("div",{className:"ui sub header"},de(e.tag)),o.createElement("span",null,me(n))):null}function pe(e){return me(fe(e).map((function(e,t){return o.createElement("i",{key:t},e)})))}function ge(e){return o.createElement("h2",{className:"ui header"},e.data.split("/").filter((function(e){return!!e})).map((function(e,t){return o.createElement("div",{key:t},e,o.createElement("br",null))})))}function ve(e,t,n){return G()(t,(function(t){return e.filter((function(e){return e.tag===t})).map((function(e){return n(e)}))})).filter((function(e){return null!==e})).map((function(e,t){return o.createElement("div",{className:"ui segment",key:t},e)}))}function we(e){return e.tree.length>0||e.data&&!e.data.startsWith("@")}function Ee(e){return e.filter((function(e){return!le.includes(e.tag)&&!ce.includes(e.tag)})).filter(we).map((function(e){return function(e){var t=[];return e.data&&t.push.apply(t,Object(a.a)(fe(e))),e.tree.filter((function(e){return"NOTE"===e.tag})).forEach((function(e){return fe(e).forEach((function(e){return t.push(o.createElement("i",null,e))}))})),t.length?o.createElement(o.Fragment,null,o.createElement("div",{className:"ui sub header"},de(e.tag)),o.createElement("span",null,me(t))):null}(e)})).filter((function(e){return null!==e})).map((function(e,t){return o.createElement("div",{className:"ui segment",key:t},e)}))}var ke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var e=this,t=this.props.gedcom.indis[this.props.indi].tree,n=t.map((function(t){return function(e,t){if(e.data){var n=t.other[K(e.data)];if(n)return n}return e}(t,e.props.gedcom)})).filter(we);return o.createElement("div",{className:"ui segments",id:"details"},ve(t,["NAME"],ge),ve(t,ce,(function(t){return he(t,e.context.intl)})),Ee(n),ve(n,["NOTE"],pe))}}]),n}(o.Component);function be(e,t,n){return{id:t&&e.indis.some((function(e){return e.id===t}))?t:e.indis[0].id,generation:n||0}}function ye(e,t,n){var a=function(e,t){var n=Object(V.parse)(e),a=Object(j.gedcomEntriesToJson)(n);if(!a||!a.indis||!a.indis.length||!a.fams||!a.fams.length)throw new Error("Failed to read GEDCOM file");return{chartData:ae(ee(a),t),gedcom:Z(n)}}(e,n||new Map),r=JSON.stringify(a);try{sessionStorage.setItem(t,r)}catch(i){console.warn("Failed to store data in session storage: "+i)}return a}function Oe(e,t){return Me.apply(this,arguments)}function Me(){return(Me=Object(p.a)(h.a.mark((function e(t,n){var a,r,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=sessionStorage.getItem(t))){e.next=4;break}return e.abrupt("return",JSON.parse(a));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Failed to load data from session storage: "+e.t0);case 9:return r=n?"https://cors-anywhere.herokuapp.com/"+t:t,e.next=12,window.fetch(r);case 12:if(200===(i=e.sent).status){e.next=15;break}throw new Error(i.statusText);case 15:return e.next=17,i.text();case 17:return o=e.sent,e.abrupt("return",ye(o,t));case 19:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function De(e,t,n){return Te.apply(this,arguments)}function Te(){return(Te=Object(p.a)(h.a.mark((function e(t,n,a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=sessionStorage.getItem(t))){e.next=4;break}return e.abrupt("return",JSON.parse(r));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Failed to load data from session storage: "+e.t0);case 9:if(n){e.next=11;break}throw new Error("Error loading data. Please upload your file again.");case 11:return e.abrupt("return",ye(n,t,a));case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}ke.contextTypes={intl:l.d};var Ie=n(196),Se=n.n(Ie),je=n(605),xe=n(611),_e=n(318),Re=n(598);function Le(e){return o.createElement(Re.a,{to:{pathname:"/view",search:w.stringify({url:e.url})}},e.text)}function Ne(){var e=o.createElement(o.Fragment,null,o.createElement("p",null,o.createElement(l.a,{id:"intro.description",defaultMessage:"Topola Genealogy is a genealogy tree viewer that lets you browse the structure of the family."})),o.createElement("p",null,o.createElement(l.a,{id:"intro.instructions",defaultMessage:"Use the OPEN FILE or LOAD FROM URL buttons above to load a GEDCOM file. You can export a GEDCOM file from most of the existing genealogy programs and web sites."})),o.createElement("p",null,o.createElement(l.a,{id:"intro.examples",defaultMessage:"Here are some examples from the web that you can view:"})),o.createElement("ul",null,o.createElement("li",null,o.createElement(Le,{url:"http://genpol.com/module-Downloads-prep_hand_out-lid-32.html",text:"Karol Wojty\u0142a"})," ","(",o.createElement(l.a,{id:"intro.from",defaultMessage:"from"})," ",o.createElement("a",{href:"http://genpol.com/module-Downloads-display-lid-32.html"},"GENPOL"),")"),o.createElement("li",null,o.createElement(Le,{url:"https://webtreeprint.com/tp_downloader.php?path=famous_gedcoms/shakespeare.ged",text:"Shakespeare"})," ","(",o.createElement(l.a,{id:"intro.from",defaultMessage:"from"})," ",o.createElement("a",{href:"https://webtreeprint.com/tp_famous_gedcoms.php"},"webtreeprint.com"),")"),o.createElement("li",null,o.createElement(Le,{url:"http://genealogyoflife.com/tng/gedcom/HarryPotter.ged",text:"Harry Potter"})," ","(",o.createElement(l.a,{id:"intro.from",defaultMessage:"from"})," ",o.createElement("a",{href:"http://famousfamilytrees.blogspot.com/"},"Famous Family Trees"),")")),o.createElement("p",null,o.createElement("b",null,o.createElement(l.a,{id:"intro.privacy",defaultMessage:"Privacy"})),": ",o.createElement(l.a,{id:"intro.privacy_note",defaultMessage:'When using the "load from file" option, this site does not send your data anywhere and files loaded from disk do not leave your computer. When using "load from URL", data is passed through the {link} service to deal with an issue with cross-site file loading in the browser (CORS).',values:{link:o.createElement("a",{href:"https://cors-anywhere.herokuapp.com/"},"cors-anywhere")}})),o.createElement("p",{className:"ui right aligned version"},"version: ","2020-04-29 23:35:43 +0200".slice(0,16)," (",o.createElement("a",{href:"https://github.com/PeWu/topola-viewer/commit/".concat("506d6bf")},"506d6bf"),")"));return o.createElement("div",{id:"content"},o.createElement("div",{className:"backgroundImage"}),o.createElement(je.a,{className:"intro"},o.createElement(T.a,{as:je.a.Content,minWidth:768},o.createElement(je.a.Header,null,o.createElement(l.a,{id:"intro.title",defaultMessage:"Topola Genealogy Viewer"}))),o.createElement(je.a.Content,null,o.createElement(T.a,{as:xe.a,minWidth:768},o.createElement(xe.a.Row,null,o.createElement(xe.a.Column,{width:5},o.createElement(_e.a,{src:Se.a,alt:"Topola logo"})),o.createElement(xe.a.Column,{width:11},e))),o.createElement(T.a,{maxWidth:767},o.createElement(_e.a,{src:Se.a,alt:"Topola logo",centered:!0,size:"tiny",className:"blockImage"}),e))))}var Ce=n(606),ze=n(616),We=n(601),Pe=n(197),Ae=n.n(Pe);function Fe(e){try{return sessionStorage.getItem(e)}catch(t){console.warn("Failed to load data from session storage: "+t)}return null}function Ue(e,t){try{sessionStorage.setItem(e,t)}catch(n){console.warn("Failed to store data in session storage: "+n)}}function Ge(e,t){return He.apply(this,arguments)}function He(){return(He=Object(p.a)(h.a.mark((function e(t,n){var a,r,i,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in(a=new FormData).append("format","json"),t)a.append(r,t[r]);return i=n?"https://cors-anywhere.herokuapp.com/https://api.wikitree.com/api.php":"https://api.wikitree.com/api.php",e.next=6,window.fetch(i,{method:"POST",body:a,credentials:n?void 0:"include"});case 6:return o=e.sent,e.next=9,o.text();case 9:return s=e.sent,e.abrupt("return",JSON.parse(s));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(p.a)(h.a.mark((function e(t,n){var a,r,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="wikitree:ancestors:".concat(t),!(r=Fe(a))){e.next=4;break}return e.abrupt("return",JSON.parse(r));case 4:return e.next=6,Ge({action:"getAncestors",key:t,fields:"*"},n);case 6:return i=e.sent,o=i[0].ancestors,Ue(a,JSON.stringify(o)),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(p.a)(h.a.mark((function e(t,n){var a,r,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],r=[],t.forEach((function(e){var t=Fe("wikitree:relatives:".concat(e));t?a.push(JSON.parse(t)):r.push(e)})),0!==r.length){e.next=5;break}return e.abrupt("return",a);case 5:return e.next=7,Ge({action:"getRelatives",keys:r.join(","),getChildren:!0,getSpouses:!0},n);case 7:if(null!==(i=e.sent)[0].items){e.next=10;break}throw new Error("WikiTree profile ".concat(r[0]," not found."));case 10:return(o=i[0].items.map((function(e){return e.person}))).forEach((function(e){Ue("wikitree:relatives:".concat(e.Name),JSON.stringify(e))})),e.abrupt("return",a.concat(o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge({action:"clientLogin",authcode:t},!1);case 2:return n=e.sent,e.abrupt("return",n.clientLogin);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return Ae.a.get("wikidb_wtb_UserName")}function Xe(e,t,n){return $e.apply(this,arguments)}function $e(){return($e=Object(p.a)(h.a.mark((function e(t,n,r){var i,o,s,c,l,u,d,f,p,g,v,w,E,k,b,y,O,M,D,T,I,S,j,x,_;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i="apps.wikitree.com"!==window.location.hostname)||Ye()||!r){e.next=6;break}return e.next=4,qe(r);case 4:"Success"===(o=e.sent).result&&(sessionStorage.clear(),Ae.a.set("wikidb_wtb_UserName",o.username));case 6:return s=[],e.next=9,Ke([t],i);case 9:if((c=e.sent)[0].Name){e.next=12;break}throw new Error("WikiTree profile ".concat(t," is not accessible. Try logging in."));case 12:return l=Object.values(c[0].Spouses).map((function(e){return e.Name})),e.next=15,Promise.all([t].concat(l).map((function(e){return Be(e,i)})));case 15:return u=e.sent,d=u.flat().map((function(e){return e.Name})).filter((function(e){return!!e})),e.next=19,Ke(d,i);case 19:f=e.sent,p=new Map,g=new Map,u.forEach((function(e,t){var n=1e3*t;e.forEach((function(e){e.Id<0&&(e.Id-=n,e.Name="".concat("~Private").concat(e.Id)),e.Father<0&&(e.Father-=n,p.set(e.Id,e.Father)),e.Mother<0&&(e.Mother-=n,g.set(e.Id,e.Mother))}))})),f.forEach((function(e){var t=p.get(e.Id);t&&(e.Father=t);var n=g.get(e.Id);n&&(e.Mother=n)})),s.push.apply(s,Object(a.a)(f)),v=u.flat().filter((function(e){return e.Id<0})),s.push.apply(s,Object(a.a)(v)),w=5,E=[t],k=0;case 30:if(!(E.length>0&&k<=w)){e.next=41;break}return e.next=33,Ke(E,i);case 33:b=e.sent,s.push.apply(s,Object(a.a)(b)),y=b.flatMap((function(e){return Object.values(e.Spouses)})),s.push.apply(s,Object(a.a)(y)),E=b.flatMap((function(e){return Object.values(e.Children).map((function(e){return e.Name}))})),k++,e.next=30;break;case 41:return O=new Map,M=new Map,D=new Map,T=new Map,s.forEach((function(e){if(T.set(e.Id,e.Name),e.Mother||e.Father){var t=Qe(e.Mother,e.Father);rt(O,e.Mother).add(t),rt(O,e.Father).add(t),rt(M,t).add(e.Id),D.set(t,{wife:e.Mother||void 0,husband:e.Father||void 0})}})),I=[],S=new Set,s.forEach((function(e){if(!S.has(e.Id)){S.add(e.Id);var t=et(e,n);e.Spouses&&Object.values(e.Spouses).forEach((function(t){var n=Qe(e.Id,t.Id);rt(O,e.Id).add(n),rt(O,t.Id).add(n);var a="Male"===e.Gender?{wife:t.Id,husband:e.Id,spouse:t}:{wife:e.Id,husband:t.Id,spouse:t};D.set(n,a)})),t.fams=Array.from(rt(O,e.Id)),I.push(t)}})),j=Array.from(D.entries()).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1],r={id:n},i=a.wife&&T.get(a.wife);i&&(r.wife=i);var o=a.husband&&T.get(a.husband);if(o&&(r.husb=o),r.children=Array.from(rt(M,n)).map((function(e){return T.get(e)})),a.spouse&&(a.spouse.marriage_date&&"0000-00-00"!==a.spouse.marriage_date||a.spouse.marriage_location)){var s=tt(a.spouse.marriage_date);r.marriage=Object.assign({},s,{place:a.spouse.marriage_location})}return r})),x=ee({indis:I,fams:j}),_=at(I),e.abrupt("return",{chartData:x,gedcom:_});case 53:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e,t){return t>e?"".concat(e,"_").concat(t):"".concat(t,"_").concat(e)}function et(e,t){var n={id:e.Name};if(e.Name.startsWith("~Private")&&(n.hideId=!0,n.firstName=t.formatMessage({id:"wikitree.private",defaultMessage:"Private"})),e.FirstName&&"Unknown"!==e.FirstName&&(n.firstName=e.FirstName),"Unknown"!==e.LastNameAtBirth&&(n.lastName=e.LastNameAtBirth),(e.Mother||e.Father)&&(n.famc=Qe(e.Mother,e.Father)),"Male"===e.Gender?n.sex="M":"Female"===e.Gender&&(n.sex="F"),e.BirthDate&&"0000-00-00"!==e.BirthDate||e.BirthLocation||"unknown"!==e.BirthDateDecade){var a=tt(e.BirthDate,e.DataStatus&&e.DataStatus.BirthDate)||nt(e.BirthDateDecade);n.birth=Object.assign({},a,{place:e.BirthLocation})}if(e.DeathDate&&"0000-00-00"!==e.DeathDate||e.DeathLocation||"unknown"!==e.DeathDateDecade){var r=tt(e.DeathDate,e.DataStatus&&e.DataStatus.DeathDate)||nt(e.DeathDateDecade);n.death=Object.assign({},r,{place:e.DeathLocation})}return e.PhotoData&&(n.images=[{url:"https://www.wikitree.com".concat(e.PhotoData.url)}]),n}function tt(e,t){if(e){var n=e.match(/(\d\d\d\d)-(\d\d)-(\d\d)/);if(!n)return{date:{text:e}};var a={};return"0000"!==n[1]&&(a.year=~~n[1]),"00"!==n[2]&&(a.month=~~n[2]),"00"!==n[3]&&(a.day=~~n[3]),"after"===t?{dateRange:{from:a}}:"before"===t?{dateRange:{to:a}}:("guess"===t&&(a.qualifier="abt"),{date:a})}}function nt(e){return"unknown"!==e?{date:{text:e}}:void 0}function at(e){var t={};return e.forEach((function(e){var n=e.id.replace(/ /g,"_");t[e.id]={level:0,pointer:"@".concat(e.id,"@"),tag:"INDI",data:"",tree:[{level:1,pointer:"",tag:"NAME",data:"".concat(e.firstName||""," /").concat(e.lastName||"","/"),tree:[]}]},e.id.startsWith("~")||t[e.id].tree.push({level:1,pointer:"",tag:"WWW",data:"https://www.wikitree.com/wiki/".concat(n),tree:[]})})),{head:{level:0,pointer:"",tag:"HEAD",data:"",tree:[]},indis:t,fams:{},other:{}}}function rt(e,t){var n=e.get(t);if(n)return n;var a=new Set;return e.set(t,a),a}var it=n(613),ot=n(614),st=n(609),ct=n(297),lt=n.n(ct),ut=n(198),dt=n.n(ut),mt=n(298),ft=n.n(mt),ht=n(299),pt=n.n(ht);function gt(e){return e.toLocaleLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0142/g,"l")}function vt(e,t){return e.score!==t.score?t.score-e.score:ft()(e.ref,t.ref)}var wt=function(){function e(t){Object(g.a)(this,e),this.index=void 0,this.indiMap=void 0,this.famMap=void 0,this.indiMap=J(t),this.famMap=q(t)}return Object(v.a)(e,[{key:"initialize",value:function(){var e=this;this.index=pt()((function(){var t=this;this.ref("id"),this.field("id"),this.field("name",{boost:10}),this.field("normalizedName",{boost:8}),this.field("spouseLastName",{boost:2}),this.field("normalizedSpouseLastName",{boost:2}),e.indiMap.forEach((function(n){var a=[n.firstName,n.lastName].join(" "),r=function(e,t,n){return(e.fams||[]).map((function(e){return n.get(e)})).map((function(e){return e&&e.husb})).map((function(e){return e&&t.get(e)})).map((function(e){return e&&e.lastName})).join(" ")}(n,e.indiMap,e.famMap);t.add({id:n.id,name:a,normalizedName:gt(a),spouseLastName:r,normalizedSpouseLastName:gt(r)})}))}))}},{key:"search",value:function(e){var t=this,n=e.split(" ").filter((function(e){return!!e})).map((function(e){return"+".concat(e,"*")})).join(" ");return this.index.search(n).sort(vt).slice(0,8).map((function(e){return{id:e.ref,indi:t.indiMap.get(e.ref)}}))}}]),e}();function Et(e){var t=[e.indi.firstName,e.indi.lastName].join(" ").trim();return e.id.length>8?t:o.createElement(o.Fragment,null,t," ",o.createElement("i",null,"(",e.id,")"))}function kt(e,t){var n=se(e.birth,t),a=se(e.death,t);return a?"".concat(n," \u2013 ").concat(a):n}var bt,yt,Ot=n(603),Mt=n(612),Dt=n(77),Tt=n(602),It=n(600),St=n(587),jt=n(607),xt=n(604),_t=n(608),Rt=n(78),Lt=n.n(Rt);function Nt(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsText(e)}))}function Ct(e){var t=e.toLowerCase();return t.endsWith(".jpg")||t.endsWith(".png")}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_LOGGED_IN=1]="NOT_LOGGED_IN",e[e.LOGGED_IN=2]="LOGGED_IN"}(bt||(bt={})),function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(yt||(yt={}));var zt,Wt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loadUrlDialogOpen:!1,wikiTreeIdDialogOpen:!1,searchResults:[],wikiTreeLoginState:bt.UNKNOWN},e.urlInputRef=o.createRef(),e.wikiTreeIdInputRef=o.createRef(),e.wikiTreeLoginFormRef=o.createRef(),e.wikiTreeReturnUrlRef=o.createRef(),e.searchRef=void 0,e.searchIndex=void 0,e}return Object(v.a)(n,[{key:"handleUpload",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,r,i,o,s,c,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.target.files)&&n.length){e.next=3;break}return e.abrupt("return");case 3:return a=Array.from(n),t.target.value="",E("upload_files_selected",{event_value:n.length}),r=1===a.length?a[0]:a.find((function(e){return e.name.toLowerCase().endsWith(".ged")}))||a[0],i=a.filter((function(e){return e.name!==r.name&&Ct(e.name)})).map((function(e){return{name:e.name,url:URL.createObjectURL(e)}})),o=new Map(i.map((function(e){return[e.name,e.url]}))),e.next=11,Nt(r);case 11:s=e.sent,c=i.map((function(e){return e.name})).sort().join("|"),l=dt()(dt()(s)+c),u=w.parse(this.props.location.search),(u.file===l?this.props.history.replace:this.props.history.push)({pathname:"/view",search:w.stringify({file:l}),state:{data:s,images:o}});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openLoadUrlDialog",value:function(){var e=this;this.setState(Object.assign({},this.state,{loadUrlDialogOpen:!0}),(function(){return e.urlInputRef.current.focus()}))}},{key:"openWikiTreeIdDialog",value:function(){var e=this;this.setState(Object.assign({},this.state,{wikiTreeIdDialogOpen:!0}),(function(){return e.wikiTreeIdInputRef.current.focus()}))}},{key:"handleClose",value:function(){this.setState(Object.assign({},this.state,{loadUrlDialogOpen:!1,wikiTreeIdDialogOpen:!1}))}},{key:"handleLoad",value:function(){this.setState(Object.assign({},this.state,{loadUrlDialogOpen:!1})),this.state.url&&(E("url_selected"),this.props.history.push({pathname:"/view",search:w.stringify({url:this.state.url})}))}},{key:"handleSelectWikiTreeId",value:function(){if(this.setState(Object.assign({},this.state,{wikiTreeIdDialogOpen:!1})),this.state.wikiTreeId){E("wikitree_id_selected");var e=w.parse(this.props.location.search),t=void 0===e.standalone||e.standalone;this.props.history.push({pathname:"/view",search:w.stringify({indi:this.state.wikiTreeId,source:"wikitree",standalone:t})})}}},{key:"handleUrlChange",value:function(e){this.setState(Object.assign({},this.state,{url:e}))}},{key:"handleWikiTreeIdChange",value:function(e){this.setState(Object.assign({},this.state,{wikiTreeId:e}))}},{key:"handleSearch",value:function(e){var t=this;if(e){var n=this.searchIndex.search(e).map((function(e){return function(e,t){return{id:e.id,key:e.id,title:Et(e),description:kt(e.indi,t)}}(e,t.context.intl)}));this.setState(Object.assign({},this.state,{searchResults:n}))}}},{key:"handleResultSelect",value:function(e){E("search_result_selected"),this.props.eventHandlers.onSelection({id:e,generation:0}),this.searchRef.setValue("")}},{key:"initializeSearchIndex",value:function(){this.props.data&&(this.searchIndex=function(e){var t=new wt(e);return t.initialize(),t}(this.props.data))}},{key:"changeView",value:function(e){var t=this.props.location,n=w.parse(t.search);n.view!==e&&(n.view=e,t.search=w.stringify(n),this.props.history.push(t))}},{key:"wikiTreeLogin",value:function(){var e="".concat("https://apps.wikitree.com/apps/wiech13/topola-viewer").concat(window.location.hash,"&");this.wikiTreeReturnUrlRef.current.value=e,this.wikiTreeLoginFormRef.current.submit()}},{key:"checkWikiTreeLoginState",value:function(){var e=Ye(),t=e?bt.LOGGED_IN:bt.NOT_LOGGED_IN;this.state.wikiTreeLoginState!==t&&this.setState(Object.assign({},this.state,{wikiTreeLoginState:t,wikiTreeLoginUsername:e}))}},{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checkWikiTreeLoginState(),this.initializeSearchIndex();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.checkWikiTreeLoginState(),e.data!==this.props.data&&this.initializeSearchIndex()}},{key:"loadFromUrlModal",value:function(){var e=this;return o.createElement(Ot.a,{open:this.state.loadUrlDialogOpen,onClose:function(){return e.handleClose()},centered:!1},o.createElement(Mt.a,null,o.createElement(Dt.a,{name:"cloud download"}),o.createElement(l.a,{id:"load_from_url.title",defaultMessage:"Load from URL",children:function(e){return e}})),o.createElement(Ot.a.Content,null,o.createElement(Tt.a,{onSubmit:function(){return e.handleLoad()}},o.createElement(It.a,{placeholder:"https://",fluid:!0,onChange:function(t,n){return e.handleUrlChange(n.value)},ref:this.urlInputRef}),o.createElement("p",null,o.createElement(l.a,{id:"load_from_url.comment",defaultMessage:"Data from the URL will be loaded through {link} to avoid CORS issues.",values:{link:o.createElement("a",{href:"https://cors-anywhere.herokuapp.com/"},"cors-anywhere.herokuapp.com")}})))),o.createElement(Ot.a.Actions,null,o.createElement(St.a,{secondary:!0,onClick:function(){return e.handleClose()}},o.createElement(l.a,{id:"load_from_url.cancel",defaultMessage:"Cancel"})),o.createElement(St.a,{primary:!0,onClick:function(){return e.handleLoad()}},o.createElement(l.a,{id:"load_from_url.load",defaultMessage:"Load"}))))}},{key:"enterWikiTreeId",value:function(e,t){e.preventDefault(),this.wikiTreeIdInputRef.current.inputRef.value=t,this.handleWikiTreeIdChange(t),this.wikiTreeIdInputRef.current.focus()}},{key:"wikiTreeIdModal",value:function(){var e=this;return o.createElement(Ot.a,{open:this.state.wikiTreeIdDialogOpen,onClose:function(){return e.handleClose()},centered:!1},o.createElement(Mt.a,null,o.createElement("img",{src:Lt.a,alt:"WikiTree logo",style:{width:"32px",height:"32px"}}),o.createElement(l.a,{id:"select_wikitree_id.title",defaultMessage:"Select WikiTree ID",children:function(e){return e}})),o.createElement(Ot.a.Content,null,o.createElement(Tt.a,{onSubmit:function(){return e.handleSelectWikiTreeId()}},o.createElement("p",null,o.createElement(l.a,{id:"select_wikitree_id.comment",defaultMessage:"Enter a {wikiTreeLink} profile ID. Examples: {example1}, {example2}.",values:{wikiTreeLink:o.createElement("a",{href:"https://wikitree.com/",target:"_blank",rel:"noopener noreferrer"},"WikiTree"),example1:o.createElement("span",{onClick:function(t){return e.enterWikiTreeId(t,"Wojtyla-13")},className:"link-span"},"Wojtyla-13"),example2:o.createElement("span",{onClick:function(t){return e.enterWikiTreeId(t,"Sk\u0142odowska-2")},className:"link-span"},"Sk\u0142odowska-2")}})),o.createElement(It.a,{fluid:!0,onChange:function(t,n){return e.handleWikiTreeIdChange(n.value)},ref:this.wikiTreeIdInputRef}))),o.createElement(Ot.a.Actions,null,o.createElement(St.a,{secondary:!0,onClick:function(){return e.handleClose()}},o.createElement(l.a,{id:"select_wikitree_id.cancel",defaultMessage:"Cancel"})),o.createElement(St.a,{primary:!0,onClick:function(){return e.handleSelectWikiTreeId()}},o.createElement(l.a,{id:"select_wikitree_id.load",defaultMessage:"Load"}))))}},{key:"search",value:function(){var e=this;return o.createElement(jt.a,{onSearchChange:lt()((function(t,n){return e.handleSearch(n.value)}),200),onResultSelect:function(t,n){return e.handleResultSelect(n.result.id)},results:this.state.searchResults,noResultsMessage:this.context.intl.formatMessage({id:"menu.search.no_results",defaultMessage:"No results found"}),placeholder:this.context.intl.formatMessage({id:"menu.search.placeholder",defaultMessage:"Search for people"}),selectFirstResult:!0,ref:function(t){return e.searchRef=t},id:"search"})}},{key:"chartMenus",value:function(e){var t=this;if(!this.props.showingChart)return null;var n=o.createElement(o.Fragment,null,o.createElement(xt.a.Item,{onClick:function(){return t.changeView("hourglass")}},o.createElement(Dt.a,{name:"hourglass"}),o.createElement(l.a,{id:"menu.hourglass",defaultMessage:"Hourglass chart"})),this.props.allowAllRelativesChart?o.createElement(xt.a.Item,{onClick:function(){return t.changeView("relatives")}},o.createElement(Dt.a,{name:"users"}),o.createElement(l.a,{id:"menu.relatives",defaultMessage:"All relatives"})):null,o.createElement(xt.a.Item,{onClick:function(){return t.changeView("fancy")}},o.createElement(Dt.a,{name:"users"}),o.createElement(l.a,{id:"menu.fancy",defaultMessage:"Fancy tree (experimental)"})));switch(e){case yt.LARGE:return o.createElement(o.Fragment,null,o.createElement(_t.a.Item,{onClick:function(){return t.props.eventHandlers.onPrint()}},o.createElement(Dt.a,{name:"print"}),o.createElement(l.a,{id:"menu.print",defaultMessage:"Print"})),o.createElement(xt.a,{trigger:o.createElement("div",null,o.createElement(Dt.a,{name:"download"}),o.createElement(l.a,{id:"menu.download",defaultMessage:"Download"})),className:"item"},o.createElement(xt.a.Menu,null,o.createElement(xt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadPdf()}},o.createElement(l.a,{id:"menu.pdf_file",defaultMessage:"PDF file"})),o.createElement(xt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadPng()}},o.createElement(l.a,{id:"menu.png_file",defaultMessage:"PNG file"})),o.createElement(xt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadSvg()}},o.createElement(l.a,{id:"menu.svg_file",defaultMessage:"SVG file"})))),o.createElement(xt.a,{trigger:o.createElement("div",null,o.createElement(Dt.a,{name:"eye"}),o.createElement(l.a,{id:"menu.view",defaultMessage:"View"})),className:"item"},o.createElement(xt.a.Menu,null,n)),this.search());case yt.SMALL:return o.createElement(o.Fragment,null,o.createElement(xt.a.Item,{onClick:function(){return t.props.eventHandlers.onPrint()}},o.createElement(Dt.a,{name:"print"}),o.createElement(l.a,{id:"menu.print",defaultMessage:"Print"})),o.createElement(xt.a.Divider,null),o.createElement(xt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadPdf()}},o.createElement(Dt.a,{name:"download"}),o.createElement(l.a,{id:"menu.download_pdf",defaultMessage:"Downlod PDF"})),o.createElement(xt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadPng()}},o.createElement(Dt.a,{name:"download"}),o.createElement(l.a,{id:"menu.download_png",defaultMessage:"Download PNG"})),o.createElement(xt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadSvg()}},o.createElement(Dt.a,{name:"download"}),o.createElement(l.a,{id:"menu.download_svg",defaultMessage:"Download SVG"})),o.createElement(xt.a.Divider,null),n,o.createElement(xt.a.Divider,null))}}},{key:"title",value:function(){return o.createElement(_t.a.Item,null,o.createElement("b",null,"Topola Genealogy"))}},{key:"fileMenus",value:function(e){var t=this,n=o.createElement(o.Fragment,null,o.createElement("img",{src:Lt.a,alt:"WikiTree logo",className:"menu-icon"}),o.createElement(l.a,{id:"menu.select_wikitree_id",defaultMessage:"Select WikiTree ID"}));if(!this.props.standalone&&this.props.showWikiTreeMenus)switch(e){case yt.LARGE:return o.createElement(o.Fragment,null,o.createElement(_t.a.Item,{onClick:function(){return t.openWikiTreeIdDialog()}},n),this.wikiTreeIdModal());case yt.SMALL:return o.createElement(o.Fragment,null,o.createElement(xt.a.Item,{onClick:function(){return t.openWikiTreeIdDialog()}},n),o.createElement(xt.a.Divider,null),this.wikiTreeIdModal())}if(!this.props.standalone)return null;var a=o.createElement(o.Fragment,null,o.createElement(Dt.a,{name:"folder open"}),o.createElement(l.a,{id:"menu.open_file",defaultMessage:"Open file"})),r=o.createElement(o.Fragment,null,o.createElement(Dt.a,{name:"cloud download"}),o.createElement(l.a,{id:"menu.load_from_url",defaultMessage:"Load from URL"})),i=o.createElement(o.Fragment,null,this.loadFromUrlModal(),this.wikiTreeIdModal(),o.createElement("input",{className:"hidden",type:"file",accept:".ged,image/*",id:"fileInput",multiple:!0,onChange:function(e){return t.handleUpload(e)}}));switch(e){case yt.LARGE:var s=this.props.showingChart?o.createElement(xt.a,{trigger:o.createElement("div",null,o.createElement(Dt.a,{name:"folder open"}),o.createElement(l.a,{id:"menu.open",defaultMessage:"Open"})),className:"item"},o.createElement(xt.a.Menu,null,o.createElement(xt.a.Item,{as:"label",htmlFor:"fileInput"},a),o.createElement(xt.a.Item,{onClick:function(){return t.openLoadUrlDialog()}},r),o.createElement(xt.a.Item,{onClick:function(){return t.openWikiTreeIdDialog()}},n))):o.createElement(o.Fragment,null,o.createElement("label",{htmlFor:"fileInput"},o.createElement(_t.a.Item,{as:"a"},a)),o.createElement(_t.a.Item,{onClick:function(){return t.openLoadUrlDialog()}},r),o.createElement(_t.a.Item,{onClick:function(){return t.openWikiTreeIdDialog()}},n));return o.createElement(o.Fragment,null,s,i);case yt.SMALL:return o.createElement(o.Fragment,null,o.createElement(xt.a.Item,{as:"label",htmlFor:"fileInput"},a),o.createElement(xt.a.Item,{onClick:function(){return t.openLoadUrlDialog()}},r),o.createElement(xt.a.Item,{onClick:function(){return t.openWikiTreeIdDialog()}},n),o.createElement(xt.a.Divider,null),i)}}},{key:"wikiTreeLoginMenu",value:function(e){var t=this;if(!this.props.showWikiTreeMenus)return null;switch(this.state.wikiTreeLoginState){case bt.NOT_LOGGED_IN:var n=o.createElement("form",{action:"https://api.wikitree.com/api.php",method:"POST",style:{display:"hidden"},ref:this.wikiTreeLoginFormRef},o.createElement("input",{type:"hidden",name:"action",value:"clientLogin"}),o.createElement("input",{type:"hidden",name:"returnURL",ref:this.wikiTreeReturnUrlRef}));switch(e){case yt.LARGE:return o.createElement(_t.a.Item,{onClick:function(){return t.wikiTreeLogin()}},o.createElement("img",{src:Lt.a,alt:"WikiTree logo",className:"menu-icon"}),o.createElement(l.a,{id:"menu.wikitree_login",defaultMessage:"Log in to WikiTree"}),n);case yt.SMALL:return o.createElement(o.Fragment,null,o.createElement(xt.a.Item,{onClick:function(){return t.wikiTreeLogin()}},o.createElement("img",{src:Lt.a,alt:"WikiTree logo",className:"menu-icon"}),o.createElement(l.a,{id:"menu.wikitree_login",defaultMessage:"Log in to WikiTree"}),n),o.createElement(xt.a.Divider,null))}break;case bt.LOGGED_IN:var a=this.state.wikiTreeLoginUsername?this.context.intl.formatMessage({id:"menu.wikitree_popup_username",defaultMessage:"Logged in to WikiTree as {username}"},{username:this.state.wikiTreeLoginUsername}):this.context.intl.formatMessage({id:"menu.wikitree_popup",defaultMessage:"Logged in to WikiTree"});switch(e){case yt.LARGE:return o.createElement(_t.a.Item,{title:a},o.createElement("img",{src:Lt.a,alt:"WikiTree logo",className:"menu-icon"}),o.createElement(l.a,{id:"menu.wikitree_logged_in",defaultMessage:"Logged in"}));case yt.SMALL:return o.createElement(o.Fragment,null,o.createElement(_t.a.Item,{title:a},o.createElement("img",{src:Lt.a,alt:"WikiTree logo",className:"menu-icon"}),o.createElement(l.a,{id:"menu.wikitree_logged_in",defaultMessage:"Logged in"})),o.createElement(xt.a.Divider,null));default:return null}}}},{key:"mobileMenus",value:function(){return o.createElement(o.Fragment,null,o.createElement(xt.a,{trigger:o.createElement("div",null,o.createElement(Dt.a,{name:"sidebar"})),className:"item",icon:null},o.createElement(xt.a.Menu,null,this.fileMenus(yt.SMALL),this.chartMenus(yt.SMALL),this.wikiTreeLoginMenu(yt.SMALL),o.createElement(xt.a.Item,{href:"https://github.com/PeWu/topola-viewer",target:"_blank",rel:"noopener noreferrer"},o.createElement(l.a,{id:"menu.github",defaultMessage:"Source on GitHub"})))),this.props.standalone?o.createElement(Re.a,{to:"/"},this.title()):this.title())}},{key:"desktopMenus",value:function(){return o.createElement(o.Fragment,null,this.props.standalone?o.createElement(Re.a,{to:"/"},this.title()):null,this.fileMenus(yt.LARGE),this.chartMenus(yt.LARGE),o.createElement(_t.a.Menu,{position:"right"},this.wikiTreeLoginMenu(yt.LARGE),o.createElement(_t.a.Item,{href:"https://github.com/PeWu/topola-viewer",target:"_blank",rel:"noopener noreferrer"},o.createElement(l.a,{id:"menu.github",defaultMessage:"GitHub project"}))))}},{key:"render",value:function(){return o.createElement(o.Fragment,null,o.createElement(T.a,{as:_t.a,attached:"top",inverted:!0,color:"blue",size:"large",minWidth:768},this.desktopMenus()),o.createElement(T.a,{as:_t.a,attached:"top",inverted:!0,color:"blue",size:"large",maxWidth:767},this.mobileMenus()))}}]),n}(o.Component);function Pt(e){return o.createElement(Ce.a,{negative:!0,className:"error"},o.createElement(Ce.a.Header,null,o.createElement(l.a,{id:"error.failed_to_load_file",defaultMessage:"Failed to load file"})),o.createElement("p",null,e.message))}function At(e){return o.createElement(ze.a,{open:e.open,onClose:e.onDismiss},o.createElement(Ce.a,{negative:!0,className:"errorPopup",onDismiss:e.onDismiss},o.createElement(Ce.a.Header,null,o.createElement(l.a,{id:"error.error",defaultMessage:"Error"})),o.createElement("p",null,e.message)))}Wt.contextTypes={intl:l.d},function(e){e.GEDCOM="gedcom",e.READY="ready",e.PARENT_READY="parent_ready"}(zt||(zt={}));var Ft,Ut=function(){function e(){Object(g.a)(this,e)}return Object(v.a)(e,[{key:"isNewData",value:function(e,t){return e.hash!==t.hash||!(!e.gedcom||t.loading||t.data)}},{key:"loadData",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,De(t.hash,t.gedcom,t.images);case 3:return n=e.sent,E("upload_file_loaded",{event_label:re(n.gedcom.head),event_value:t.images&&t.images.size||0}),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),E("upload_file_error"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Gt=function(){function e(){Object(g.a)(this,e)}return Object(v.a)(e,[{key:"isNewData",value:function(e,t){return e.url!==t.url}},{key:"loadData",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe(t.url,t.handleCors);case 3:return n=e.sent,E("upload_file_loaded",{event_label:re(n.gedcom.head)}),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),E("url_file_error"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ht=function(){function e(t){Object(g.a)(this,e),this.intl=t}return Object(v.a)(e,[{key:"isNewData",value:function(e,t){return(!t.selection||t.selection.id!==e.indi)&&(!t.data||!t.data.chartData.indis.some((function(t){return t.id===e.indi})))}},{key:"loadData",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe(t.indi,this.intl,t.authcode);case 3:return n=e.sent,E("wikitree_loaded"),e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),E("wikitree_error"),e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Bt(e){var t=w.parse(e.search),n=function(e){var n=t[e];return"string"===typeof n?n:void 0},a=Number(n("gen")),r=n("view"),i=new Map([["relatives",k.Relatives],["fancy",k.Fancy]]),o=n("file"),s=n("url"),c="wikitree"===n("source")?Ft.WIKITREE:o?Ft.UPLOADED:s?Ft.GEDCOM_URL:void 0;return{showSidePanel:"false"!==n("sidePanel"),embedded:"true"===n("embedded"),url:s,indi:n("indi"),generation:isNaN(a)?void 0:a,hash:o,handleCors:"false"!==n("handleCors"),standalone:"false"!==n("standalone"),source:c,authcode:n("?authcode"),freezeAnimation:"true"===n("freeze"),chartType:i.get(r)||k.Hourglass,gedcom:e.state&&e.state.data,images:e.state&&e.state.images}}!function(e){e[e.UPLOADED=0]="UPLOADED",e[e.GEDCOM_URL=1]="GEDCOM_URL",e[e.WIKITREE=2]="WIKITREE"}(Ft||(Ft={}));var Vt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,embedded:!1,standalone:!0,chartType:k.Hourglass,showErrorPopup:!1},e.chartRef=null,e.dataSources=new Map([[Ft.UPLOADED,new Ut],[Ft.GEDCOM_URL,new Gt],[Ft.WIKITREE,new Ht(e.context.intl)]]),e.onSelection=function(t){if(!t.id.startsWith("~Private"))if(E("selection_changed"),e.state.embedded)e.updateDisplay(t);else{var n=e.props.location,a=w.parse(n.search);a.indi=t.id,a.gen=String(t.generation),n.search=w.stringify(a),e.props.history.push(n)}},e.onPrint=function(){E("print"),e.chartRef&&e.chartRef.print()},e.onDownloadPdf=Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E("download_pdf"),t.prev=1,t.t0=e.chartRef,!t.t0){t.next=6;break}return t.next=6,e.chartRef.downloadPdf();case 6:t.next=11;break;case 8:t.prev=8,t.t1=t.catch(1),e.showErrorPopup(e.context.intl.formatMessage({id:"error.failed_pdf",defaultMessage:"Failed to generate PDF file. Please try with a smaller diagram or download an SVG file."}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.onDownloadPng=Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E("download_png"),t.prev=1,t.t0=e.chartRef,!t.t0){t.next=6;break}return t.next=6,e.chartRef.downloadPng();case 6:t.next=11;break;case 8:t.prev=8,t.t1=t.catch(1),e.showErrorPopup(e.context.intl.formatMessage({id:"error.failed_png",defaultMessage:"Failed to generate PNG file. Please try with a smaller diagram or download an SVG file."}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.onDownloadSvg=function(){E("download_svg"),e.chartRef&&e.chartRef.downloadSvg()},e.onDismissErrorPopup=function(){e.setState(Object.assign({},e.state,{showErrorPopup:!1}))},e.renderMainArea=function(){return e.state.data&&e.state.selection?o.createElement("div",{id:"content"},o.createElement(At,{open:e.state.showErrorPopup,message:e.state.error,onDismiss:e.onDismissErrorPopup}),e.state.loadingMore?o.createElement(We.a,{active:!0,size:"small",className:"loading-more"}):null,o.createElement(F,{data:e.state.data.chartData,selection:e.state.selection,chartType:e.state.chartType,onSelection:e.onSelection,freezeAnimation:e.state.freezeAnimation,ref:function(t){return e.chartRef=t}}),e.state.showSidePanel?o.createElement(T.a,{minWidth:768,id:"sidePanel"},o.createElement(ke,{gedcom:e.state.data.gedcom,indi:e.state.selection.id})):null):e.state.error?o.createElement(Pt,{message:e.state.error}):o.createElement(We.a,{active:!0,size:"large"})},e}return Object(v.a)(n,[{key:"updateDisplay",value:function(e,t){var n,a;(!this.state.selection||this.state.selection.id!==e.id||this.state.selection.generation!==e.generation||(n=this.state,(a=t)&&Object.entries(a).some((function(e){var t=Object(m.a)(e,2),a=t[0],r=t[1];return void 0!==r&&n[a]!==r}))))&&this.setState(Object.assign({},this.state,{selection:e},t))}},{key:"setError",value:function(e){this.setState(Object.assign({},this.state,{error:e,loading:!1}))}},{key:"onMessage",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.message!==zt.PARENT_READY){e.next=4;break}window.parent.postMessage({message:zt.READY},"*"),e.next=21;break;case 4:if(t.message!==zt.GEDCOM){e.next=21;break}if(n=t.gedcom){e.next=8;break}return e.abrupt("return");case 8:return e.prev=8,e.next=11,De("",n);case 11:a=e.sent,E("embedded_file_loaded",{event_label:re(a.gedcom.head)}),this.setState(Object.assign({},this.state,{data:a,selection:be(a.chartData),error:void 0,loading:!1})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),E("embedded_file_error"),this.setError(e.t0.message);case 21:case"end":return e.stop()}}),e,this,[[8,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,a,r,i,o,s,c=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/view"===this.props.location.pathname){e.next=2;break}return e.abrupt("return");case 2:if((t=Bt(this.props.location)).embedded&&!this.state.embedded&&(this.setState(Object.assign({},this.state,{embedded:!0,standalone:!1,showSidePanel:t.showSidePanel})),window.parent.postMessage("ready","*"),window.addEventListener("message",(function(e){return c.onMessage(e.data)}))),!t.embedded){e.next=6;break}return e.abrupt("return");case 6:if(n=this.dataSources.get(t.source)){e.next=11;break}this.props.history.replace({pathname:"/"}),e.next=41;break;case 11:if((this.state.loading||this.state.data||this.state.error)&&t.source===this.state.source&&!n.isNewData(t,this.state)){e.next=25;break}return this.setState(Object.assign({},this.state,{data:void 0,selection:{id:t.indi},hash:t.hash,error:void 0,loading:!0,url:t.url,standalone:t.standalone,chartType:t.chartType,source:t.source})),e.prev=13,e.next=16,n.loadData(t);case 16:a=e.sent,this.setState(Object.assign({},this.state,{data:a,hash:t.hash,selection:be(a.chartData,t.indi,t.generation),error:void 0,loading:!1,url:t.url,showSidePanel:t.showSidePanel,standalone:t.standalone,chartType:t.chartType,source:t.source,freezeAnimation:t.freezeAnimation})),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),this.setError(e.t0.message);case 23:e.next=41;break;case 25:if(!this.state.data||!this.state.selection){e.next=41;break}if(r=be(this.state.data.chartData,t.indi,t.generation),i=t.source===Ft.WIKITREE&&(!this.state.selection||this.state.selection.id!==r.id),this.updateDisplay(r,{chartType:t.chartType,loadingMore:i||void 0}),!i){e.next=41;break}return e.prev=30,e.next=33,Xe(t.indi,this.context.intl);case 33:o=e.sent,s=be(o.chartData,t.indi,t.generation),this.setState(Object.assign({},this.state,{data:o,hash:t.hash,selection:s,error:void 0,loading:!1,url:t.url,showSidePanel:t.showSidePanel,standalone:t.standalone,chartType:t.chartType,source:t.source,loadingMore:!1})),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(30),this.showErrorPopup(this.context.intl.formatMessage({id:"error.failed_wikitree_load_more",defaultMessage:"Failed to load data from WikiTree. {error}"},{error:e.t1}),{loadingMore:!1});case 41:case"end":return e.stop()}}),e,this,[[13,20],[30,38]])})));return function(){return e.apply(this,arguments)}}()},{key:"showErrorPopup",value:function(e,t){this.setState(Object.assign({},this.state,{showErrorPopup:!0,error:e},t))}},{key:"render",value:function(){var e=this;return o.createElement(o.Fragment,null,o.createElement(it.a,{render:function(t){return o.createElement(Wt,Object.assign({},t,{data:e.state.data&&e.state.data.chartData,allowAllRelativesChart:e.state.source!==Ft.WIKITREE,showingChart:!("/view"!==e.props.history.location.pathname||!e.state.data||!e.state.selection),standalone:e.state.standalone,eventHandlers:{onSelection:e.onSelection,onPrint:e.onPrint,onDownloadPdf:e.onDownloadPdf,onDownloadPng:e.onDownloadPng,onDownloadSvg:e.onDownloadSvg},showWikiTreeMenus:e.state.source===Ft.WIKITREE}))}}),o.createElement(ot.a,null,o.createElement(it.a,{exact:!0,path:"/",component:Ne}),o.createElement(it.a,{exact:!0,path:"/view",render:this.renderMainArea}),o.createElement(st.a,{to:"/"})))}}]),n}(o.Component);Vt.contextTypes={intl:l.d};var Kt=n(317),Jt=n(610);n(582),n(583),n(584);Object(l.c)([].concat(Object(a.a)(r),Object(a.a)(i)));var qt={pl:c},Zt=navigator.language&&navigator.language.split(/[-_]/)[0],Yt=Object(Kt.detect)();Yt&&"ie"===Yt.name?s.render(o.createElement("p",null,"Topola Genealogy Viewer does not support Internet Explorer. Please try a different browser."),document.querySelector("#root")):s.render(o.createElement(l.b,{locale:Zt,messages:qt[Zt]},o.createElement(Jt.a,null,o.createElement(it.a,{component:Vt}))),document.querySelector("#root"))},78:function(e,t,n){e.exports=n.p+"static/media/wikitree.1dee3d66.png"}},[[331,1,2]]]);
//# sourceMappingURL=main.0c73a86c.chunk.js.map